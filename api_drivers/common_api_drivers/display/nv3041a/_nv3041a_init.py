import time
from micropython import const  # NOQA
import lvgl as lv  # NOQA

_NV3041A_INIT_CMDS = const((
    (0xff,0xa5,0),
    (0xE7,0x10,0),
    (0x35,0x00,0),
    (0x36,0xc0,0), # MACTL
    (0x3A,0x01,0), # 01---565ï¼Œ00---666
    (0x40,0x01,0),
    (0x41,0x03,0), # 01--8bit, 03-16bit
    (0x44,0x15,0),
    (0x45,0x15,0),
    (0x7d,0x03,0),
    (0xc1,0xbb,0), 
    (0xc2,0x05,0),
    (0xc3,0x10,0),
    (0xc6,0x3e,0),
    (0xc7,0x25,0),
    (0xc8,0x11,0),
    (0x7a,0x5f,0),
    (0x6f,0x44,0),
    (0x78,0x70,0),
    (0xc9,0x00,0),
    (0x67,0x21,0),

    (0x51,0x0a,0),
    (0x52,0x76,0),
    (0x53,0x0a,0),
    (0x54,0x76,0),

    (0x46,0x0a,0),
    (0x47,0x2a,0),
    (0x48,0x0a,0),
    (0x49,0x1a,0),
    (0x56,0x43,0),
    (0x57,0x42,0),
    (0x58,0x3c,0),
    (0x59,0x64,0),
    (0x5a,0x41,0),
    (0x5b,0x3c,0),
    (0x5c,0x02,0),
    (0x5d,0x3c,0),
    (0x5e,0x1f,0),
    (0x60,0x80,0),
    (0x61,0x3f,0),
    (0x62,0x21,0),
    (0x63,0x07,0),
    (0x64,0xe0,0),
    (0x65,0x02,0),
    (0xca,0x20,0),
    (0xcb,0x52,0),
    (0xcc,0x10,0),
    (0xcD,0x42,0),

    (0xD0,0x20,0),
    (0xD1,0x52,0),
    (0xD2,0x10,0),
    (0xD3,0x42,0),
    (0xD4,0x0a,0),
    (0xD5,0x32,0),

    (0xf8,0x03,0),
    (0xf9,0x20,0),

    (0x80,0x00,0),
    (0xA0,0x00,0),

    (0x81,0x07,0),
    (0xA1,0x06,0),

    (0x82,0x02,0),
    (0xA2,0x01,0),

    (0x86,0x11,0),
    (0xA6,0x10,0),

    (0x87,0x27,0),
    (0xA7,0x27,0),

    (0x83,0x37,0),
    (0xA3,0x37,0),

    (0x84,0x35,0),
    (0xA4,0x35,0),

    (0x85,0x3f,0),
    (0xA5,0x3f,0),

    (0x88,0x0b,0),
    (0xA8,0x0b,0),

    (0x89,0x14,0),
    (0xA9,0x14,0),

    (0x8a,0x1a,0),
    (0xAa,0x1a,0),

    (0x8b,0x0a,0),
    (0xAb,0x0a,0),

    (0x8c,0x14,0),
    (0xAc,0x08,0),

    (0x8d,0x17,0),
    (0xAd,0x07,0),

    (0x8e,0x16,0),
    (0xAe,0x06,0),

    (0x8f,0x1B,0),
    (0xAf,0x07,0),

    (0x90,0x04,0),
    (0xB0,0x04,0),

    (0x91,0x0A,0),
    (0xB1,0x0A,0),

    (0x92,0x16,0),
    (0xB2,0x15,0),

    (0xff,0x00,0),
    (0x11,0x00,700),
    (0x29,0x00,100)
))


def init(self):
    param_buf = bytearray(15)
    param_mv = memoryview(param_buf)

    # Custom CMD sequense   
    for cmd,p,pause in _NV3041A_INIT_CMDS:
        param_buf[0] = p
        self.set_params(cmd, param_mv[:1])
        time.sleep_ms(pause)
